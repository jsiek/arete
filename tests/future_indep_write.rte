fun write(!p, v) {
  *p = v;
}

fun main() {
  def !a = new 0;
  def !b = new 0;
  def f2 = spawn write(b, -42);
  def f1 = spawn write(a, 42);
  ! wait f1;
  ! wait f2;
  return *a + *b;
}

fun write(!p, v) {
  *p = v;
}

fun main() {
  def !p = new 1;
  def t = spawn spawn write(p, 0);
  ! wait t;
  return *p;
}